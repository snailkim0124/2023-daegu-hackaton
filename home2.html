<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>군데군데</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <header>
        <h1>army</h1>
        <nav>
            <div id="grid">
                <ul>
                        <li><a href="home2.html">홈화면</a></li>
                        <li><a href="board.html">게시판</a></li>
                        <li><a href="pri_mento.html">우수멘토</a></li>
                        <li></lli><button><a id = "log" >로그아웃</a></button></li>
                </ul>
                <body>
                    <script type = "module">
                        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.6.0/firebase-app.js";
                        import { getFirestore } from "https://www.gstatic.com/firebasejs/10.6.0/firebase-firestore.js";
                        import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.6.0/firebase-analytics.js";
                        import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.6.0/firebase-auth.js";
                        const firebaseConfig = {
                            apiKey: "AIzaSyBIHPO5v0boLTFy2eTgCa-LR-Uw6Ox_FRQ",
                            authDomain: "solder-ca5a3.firebaseapp.com",
                            projectId: "solder-ca5a3",
                            storageBucket: "solder-ca5a3.appspot.com",
                            messagingSenderId: "19765747133",
                            appId: "1:19765747133:web:a1eda0bf74f4bb9c3a86d4",
                            measurementId: "G-Q37TJ4BL3Y"
                        };
                        // Initialize Firebase
                        const app = initializeApp(firebaseConfig);
                        const analytics = getAnalytics(app);
                        const auth = getAuth();
                        let UID = auth.currentUser;
                        onAuthStateChanged(auth, (user) => {
                            if (auth.currentUser) {
                                // User is signed in, see docs for a list of available properties
                                // https://firebase.google.com/docs/reference/js/auth.user
                                const uid = user.uid;
                                UID = user;
                                //console.log(auth.currentUser);
                                // ...
                            } else {
                                alert("로그아웃 합니다.");
                                location.href='/';
                                // User is signed out
                                // ...
                            }
                        })
                        // const db = getFirestore(app);
                        // const docRef = doc(db, "mentor", UID.uid);
                        // const docSnap = await getDoc(docRef);

                        // if (!docSnap.exists()) {
                        //     console.log("No such document!");
                        //     alert("logout");
                        //     location.href='/';
                        // } 

                        const out = document.getElementById("log");
                        out.addEventListener('click',()=>{
                            signOut(auth).then(() => {
                                
                            // Sign-out successful.
                            }).catch((error) => {
                            // An error happened.
                            });
                            location.href='/';
                        })
                    </script>
                </body>
            </div>
            
        </nav>
    </header>
    <section>
        <p>
            홈화면 입니다.
        </p>
    </section>
</body>
</html>